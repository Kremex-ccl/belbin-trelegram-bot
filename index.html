<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –ë–µ–ª–±–∏–Ω–∞</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 500px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }
        h1 { color: #333; text-align: center; margin-bottom: 20px; }
        .screen { display: none; }
        .active { display: block; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        .option {
            padding: 15px;
            margin: 10px 0;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .option:hover { border-color: #667eea; background: #f8f9ff; }
        .option.selected { border-color: #4caf50; background: #e8f5e9; }
        
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 14px;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            width: 100%;
            font-weight: bold;
            margin-top: 20px;
        }
        
        .result-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin: 15px 0;
            border-left: 5px solid #667eea;
        }
        
        .progress-bar {
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }
        .progress { height: 100%; background: #4caf50; transition: width 0.3s; }
    </style>
</head>
<body>
    <div class="container">
        <!-- –≠–∫—Ä–∞–Ω 1: –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ -->
        <div id="screen1" class="screen active">
            <h1>üß© –¢–µ—Å—Ç –ë–µ–ª–±–∏–Ω–∞</h1>
            <p style="text-align: center; margin: 20px 0; color: #666;">
                –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –≤–∞—à–∏ –∫–æ–º–∞–Ω–¥–Ω—ã–µ —Ä–æ–ª–∏
            </p>
            
            <div style="background: #f0f8ff; padding: 20px; border-radius: 15px; margin: 20px 0;">
                <p><b>üìä –ß—Ç–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç —Ç–µ—Å—Ç:</b></p>
                <p>‚Ä¢ –í–∞—à–∏ —Å–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã –≤ –∫–æ–º–∞–Ω–¥–µ</p>
                <p>‚Ä¢ –¢–æ–ø-3 –∫–æ–º–∞–Ω–¥–Ω—ã–µ —Ä–æ–ª–∏</p>
                <p>‚Ä¢ –ó–æ–Ω—ã –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è</p>
                <p>‚Ä¢ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –¥—Ä—É–≥–∏–º–∏ —Ä–æ–ª—è–º–∏</p>
            </div>
            
            <div style="background: #fff8e1; padding: 15px; border-radius: 12px; margin: 20px 0;">
                <p><b>üìù –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:</b></p>
                <p>–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π <b>–ª—É—á—à–µ –≤—Å–µ–≥–æ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –≤–∞—Å</b> –≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Ä–∞–±–æ—Ç–µ.</p>
                <p>–û—Ç–≤–µ—á–∞–π—Ç–µ —á–µ—Å—Ç–Ω–æ, –∫–∞–∫ –µ—Å—Ç—å, –∞ –Ω–µ –∫–∞–∫ —Ö–æ—Ç–µ–ª–æ—Å—å –±—ã –±—ã—Ç—å.</p>
            </div>
            
            <button onclick="startTest()">–ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç (7 –≤–æ–ø—Ä–æ—Å–æ–≤)</button>
        </div>
        
        <!-- –≠–∫—Ä–∞–Ω 2: –¢–µ—Å—Ç -->
        <div id="screen2" class="screen">
            <div class="progress-bar">
                <div id="progress" class="progress" style="width: 0%"></div>
            </div>
            <h3 id="questionNum">–í–æ–ø—Ä–æ—Å 1 –∏–∑ 7</h3>
            <p id="questionText" style="font-size: 18px; margin: 20px 0; line-height: 1.4;"></p>
            <div id="options"></div>
            <button id="nextBtn" onclick="nextQuestion()">–î–∞–ª–µ–µ ‚Üí</button>
        </div>
        
        <!-- –≠–∫—Ä–∞–Ω 3: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
        <div id="screen3" class="screen">
            <h1>üéØ –í–∞—à–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</h1>
            <div id="results"></div>
            <button onclick="sendToTelegram()">üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ Telegram</button>
            <button onclick="restartTest()" style="background: #6c757d; margin-top: 10px;">üîÑ –ü—Ä–æ–π—Ç–∏ –µ—â–µ —Ä–∞–∑</button>
        </div>
    </div>

    <script>
        // –¢–µ—Å—Ç –ë–µ–ª–±–∏–Ω–∞ (7 –≤–æ–ø—Ä–æ—Å–æ–≤)
        const questions = [
            {
                text: "–í –∫–æ–º–∞–Ω–¥–Ω–æ–π —Ä–∞–±–æ—Ç–µ —è –æ–±—ã—á–Ω–æ:",
                options: [
                    {text: "–ì–µ–Ω–µ—Ä–∏—Ä—É—é –Ω–æ–≤—ã–µ –∏–¥–µ–∏", scores: {"–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä": 2}},
                    {text: "–û—Ä–≥–∞–Ω–∏–∑—É—é –ø—Ä–æ—Ü–µ—Å—Å –∏ –∑–∞–¥–∞—á–∏", scores: {"–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä": 2}},
                    {text: "–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω—è—é —Ä–∞–±–æ—Ç—É", scores: {"–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å": 2}},
                    {text: "–ê–Ω–∞–ª–∏–∑–∏—Ä—É—é —Ä–µ—à–µ–Ω–∏—è", scores: {"–û—Ü–µ–Ω—â–∏–∫": 2}}
                ]
            },
            {
                text: "–ú–æ—è –≥–ª–∞–≤–Ω–∞—è —Å–∏–ª–∞:",
                options: [
                    {text: "–¢–≤–æ—Ä—á–µ—Å–∫–∏–π –ø–æ–¥—Ö–æ–¥", scores: {"–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä": 2}},
                    {text: "–õ–∏–¥–µ—Ä—Å–∫–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞", scores: {"–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä": 2}},
                    {text: "–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å", scores: {"–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å": 2}},
                    {text: "–í–Ω–∏–º–∞–Ω–∏–µ –∫ –¥–µ—Ç–∞–ª—è–º", scores: {"–ó–∞–≤–µ—Ä—à–∞—é—â–∏–π": 2}}
                ]
            },
            {
                text: "–í –∫–æ–Ω—Ñ–ª–∏–∫—Ç–Ω–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏:",
                options: [
                    {text: "–ò—â—É –∫–æ–º–ø—Ä–æ–º–∏—Å—Å", scores: {"–î–∏–ø–ª–æ–º–∞—Ç": 2}},
                    {text: "–ê–Ω–∞–ª–∏–∑–∏—Ä—É—é –ø—Ä–∏—á–∏–Ω—ã", scores: {"–û—Ü–µ–Ω—â–∏–∫": 2}},
                    {text: "–ü—Ä–µ–¥–ª–∞–≥–∞—é —Ä–µ—à–µ–Ω–∏–µ", scores: {"–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä": 2}},
                    {text: "–°–æ—Ö—Ä–∞–Ω—è—é —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ", scores: {"–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å": 2}}
                ]
            },
            {
                text: "–ß—Ç–æ —É –º–µ–Ω—è –ø–æ–ª—É—á–∞–µ—Ç—Å—è –ª—É—á—à–µ –≤—Å–µ–≥–æ:",
                options: [
                    {text: "–í–¥–æ—Ö–Ω–æ–≤–ª—è—Ç—å –∫–æ–º–∞–Ω–¥—É", scores: {"–ú–æ—Ç–∏–≤–∞—Ç–æ—Ä": 2}},
                    {text: "–ù–∞—Ö–æ–¥–∏—Ç—å –Ω—É–∂–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã", scores: {"–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å": 2}},
                    {text: "–ì–ª—É–±–æ–∫–æ —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è –≤ —Ç–µ–º–µ", scores: {"–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç": 2}},
                    {text: "–ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ", scores: {"–ó–∞–≤–µ—Ä—à–∞—é—â–∏–π": 2}}
                ]
            },
            {
                text: "–ü—Ä–∏ –ø—Ä–∏–Ω—è—Ç–∏–∏ —Ä–µ—à–µ–Ω–∏–π —è:",
                options: [
                    {text: "–†–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—é –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã", scores: {"–û—Ü–µ–Ω—â–∏–∫": 2}},
                    {text: "–î–æ–≤–µ—Ä—è—é –∏–Ω—Ç—É–∏—Ü–∏–∏", scores: {"–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä": 2}},
                    {text: "–°–æ–≤–µ—Ç—É—é—Å—å —Å –∫–æ–º–∞–Ω–¥–æ–π", scores: {"–î–∏–ø–ª–æ–º–∞—Ç": 2}},
                    {text: "–°–ª–µ–∂—É –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º", scores: {"–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å": 2}}
                ]
            },
            {
                text: "–î–ª—è –º–µ–Ω—è –≤–∞–∂–Ω–æ:",
                options: [
                    {text: "–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏", scores: {"–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å": 2}},
                    {text: "–ì–∞—Ä–º–æ–Ω–∏—è –≤ –∫–æ–ª–ª–µ–∫—Ç–∏–≤–µ", scores: {"–î–∏–ø–ª–æ–º–∞—Ç": 2}},
                    {text: "–†–µ–∑—É–ª—å—Ç–∞—Ç –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å", scores: {"–ú–æ—Ç–∏–≤–∞—Ç–æ—Ä": 2}},
                    {text: "–ü–æ—Ä—è–¥–æ–∫ –∏ –ø—Ä–æ—Ü–µ—Å—Å", scores: {"–ó–∞–≤–µ—Ä—à–∞—é—â–∏–π": 2}}
                ]
            },
            {
                text: "–í –Ω–µ–∑–Ω–∞–∫–æ–º–æ–π –∑–∞–¥–∞—á–µ —è:",
                options: [
                    {text: "–ò–∑—É—á–∞—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é", scores: {"–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç": 2}},
                    {text: "–ò—â—É –ø–æ–¥–¥–µ—Ä–∂–∫—É", scores: {"–î–∏–ø–ª–æ–º–∞—Ç": 2}},
                    {text: "–î–µ–π—Å—Ç–≤—É—é —Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ", scores: {"–ú–æ—Ç–∏–≤–∞—Ç–æ—Ä": 2}},
                    {text: "–ê–Ω–∞–ª–∏–∑–∏—Ä—É—é —Ä–∏—Å–∫–∏", scores: {"–û—Ü–µ–Ω—â–∏–∫": 2}}
                ]
            }
        ];

        const roleDescriptions = {
            "–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å": "–ù–∞–¥–µ–∂–Ω—ã–π –∏ –ø—Ä–∞–∫—Ç–∏—á–Ω—ã–π. –ü—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –∏–¥–µ–∏ –≤ –¥–µ–π—Å—Ç–≤–∏—è.",
            "–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä": "–õ–∏–¥–µ—Ä –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä. –ù–∞–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É –∫ —Ü–µ–ª–∏.",
            "–ú–æ—Ç–∏–≤–∞—Ç–æ—Ä": "–≠–Ω–µ—Ä–≥–∏—á–Ω—ã–π –∏ –¥–∏–Ω–∞–º–∏—á–Ω—ã–π. –ü—Ä–µ–æ–¥–æ–ª–µ–≤–∞–µ—Ç –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è.",
            "–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä": "–ö—Ä–µ–∞—Ç–∏–≤–Ω—ã–π –∏ –∏–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω—ã–π. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏–¥–µ–∏.",
            "–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å": "–ö–æ–º–º—É–Ω–∏–∫–∞–±–µ–ª—å–Ω—ã–π. –ò—â–µ—Ç –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏.",
            "–û—Ü–µ–Ω—â–∏–∫": "–ê–Ω–∞–ª–∏—Ç–∏–∫. –í–∑–≤–µ—à–∏–≤–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏.",
            "–î–∏–ø–ª–æ–º–∞—Ç": "–ß—É—Ç–∫–∏–π –∏ –¥–∏–ø–ª–æ–º–∞—Ç–∏—á–Ω—ã–π. –°–æ–∑–¥–∞–µ—Ç –≥–∞—Ä–º–æ–Ω–∏—é.",
            "–ó–∞–≤–µ—Ä—à–∞—é—â–∏–π": "–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã–π –∫ –¥–µ—Ç–∞–ª—è–º. –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ.",
            "–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç": "–≠–∫—Å–ø–µ—Ä—Ç. –û–±–ª–∞–¥–∞–µ—Ç –≥–ª—É–±–æ–∫–∏–º–∏ –∑–Ω–∞–Ω–∏—è–º–∏."
        };

        let currentQuestion = 0;
        let answers = [];
        let scores = {
            "–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å": 0, "–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä": 0, "–ú–æ—Ç–∏–≤–∞—Ç–æ—Ä": 0,
            "–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä": 0, "–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å": 0, "–û—Ü–µ–Ω—â–∏–∫": 0,
            "–î–∏–ø–ª–æ–º–∞—Ç": 0, "–ó–∞–≤–µ—Ä—à–∞—é—â–∏–π": 0, "–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç": 0
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        let tg = window.Telegram.WebApp;
        tg.expand();
        tg.ready();

        function startTest() {
            document.getElementById('screen1').classList.remove('active');
            document.getElementById('screen2').classList.add('active');
            showQuestion(0);
        }

        function showQuestion(index) {
            const q = questions[index];
            
            // –ü—Ä–æ–≥—Ä–µ—Å—Å
            const progress = ((index + 1) / questions.length) * 100;
            document.getElementById('progress').style.width = `${progress}%`;
            
            // –í–æ–ø—Ä–æ—Å
            document.getElementById('questionNum').textContent = `–í–æ–ø—Ä–æ—Å ${index + 1} –∏–∑ ${questions.length}`;
            document.getElementById('questionText').textContent = q.text;
            
            // –í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤
            const optionsContainer = document.getElementById('options');
            optionsContainer.innerHTML = '';
            
            q.options.forEach((option, i) => {
                const div = document.createElement('div');
                div.className = 'option' + (answers[index] === i ? ' selected' : '');
                div.textContent = option.text;
                div.onclick = () => {
                    answers[index] = i;
                    showQuestion(index);
                };
                optionsContainer.appendChild(div);
            });
            
            // –ö–Ω–æ–ø–∫–∞
            document.getElementById('nextBtn').textContent = 
                index === questions.length - 1 ? '–ó–∞–≤–µ—Ä—à–∏—Ç—å —Ç–µ—Å—Ç' : '–î–∞–ª–µ–µ ‚Üí';
        }

        function nextQuestion() {
            if (answers[currentQuestion] === undefined) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞');
                return;
            }
            
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                showQuestion(currentQuestion);
            } else {
                calculateResults();
            }
        }

        function calculateResults() {
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç
            for (let role in scores) scores[role] = 0;
            
            // –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º
            answers.forEach((answerIndex, qIndex) => {
                if (answerIndex !== undefined) {
                    const option = questions[qIndex].options[answerIndex];
                    for (let role in option.scores) {
                        scores[role] += option.scores[role];
                    }
                }
            });
            
            showResults();
        }

        function showResults() {
            document.getElementById('screen2').classList.remove('active');
            document.getElementById('screen3').classList.add('active');
            
            // –°–æ—Ä—Ç–∏—Ä—É–µ–º
            const sortedResults = Object.entries(scores)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 3);
            
            let resultsHTML = '';
            const medals = ['ü•á', 'ü•à', 'ü•â'];
            
            sortedResults.forEach(([role, score], index) => {
                resultsHTML += `
                    <div class="result-card">
                        <h3>${medals[index]} ${role} - ${score} –±–∞–ª–ª–æ–≤</h3>
                        <p>${roleDescriptions[role]}</p>
                    </div>
                `;
            });
            
            document.getElementById('results').innerHTML = resultsHTML;
        }

        function sendToTelegram() {
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ Telegram
            tg.sendData(JSON.stringify({
                action: "belbin_test_results",
                results: scores,
                timestamp: new Date().toISOString()
            }));
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            tg.showAlert('–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ Telegram!');
            
            // –ó–∞–∫—Ä—ã–≤–∞–µ–º Web App —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                tg.close();
            }, 2000);
        }

        function restartTest() {
            currentQuestion = 0;
            answers = [];
            for (let role in scores) scores[role] = 0;
            
            document.getElementById('screen3').classList.remove('active');
            document.getElementById('screen1').classList.add('active');
        }
    </script>
</body>
</html>
